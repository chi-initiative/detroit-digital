<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Tigers Attendance Graph</title>
	<link rel="stylesheet" href="master.css">
	<script src="d3.v2.min.js"></script>
	<script src="xcharts.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</head>

<body>
<h2>Yearly Attendance at Tigers Games</h2>

<figure id="myChart" style="height:600px"></figure>

<script>
var tt = document.createElement('div')
leftOffset = -(~~$('html').css('padding-left').replace('px', '') + ~~$('body').css('margin-left').replace('px', '')),
  topOffset = -32;
	tt.className = "tooltip"
	document.body.appendChild(tt);
var data = {
	"main": [
		{
          "label": "attendance",
		  "data": [
            {
              "x": 1901,
              "y": 259430
            },
            {
              "x": 1902,
              "y": 189469
            },
            {
              "x": 1903,
              "y": 224523
            },
			{
              "x": 1904,
              "y": 177796
            },
			{
              "x": 1905,
              "y": 193384
            },
			{
              "x": 1906,
              "y": 174043
            },
			{
              "x": 1907,
              "y": 297079
            },
			{
              "x": 1908,
              "y": 436199
            },
			{
              "x": 1909,
              "y": 490490
            },
			{
              "x": 1910,
              "y": 391288
            },
			{
              "x": 1911,
              "y": 484988
            },
			{
              "x": 1912,
              "y": 402870
            },
			{
              "x": 1913,
              "y": 398502
            },
			{
              "x": 1914,
              "y": 416225
            },
			{
              "x": 1915,
              "y": 476105
            },
			{
              "x": 1916,
              "y": 616772
            },
			{
              "x": 1917,
              "y": 457289
            },
			{
              "x": 1918,
              "y": 203719
            },
			{
              "x": 1919,
              "y": 643805
            },
			{
              "x": 1920,
              "y": 579650
            },
			{
              "x": 1921,
              "y": 661527
            },
			{
              "x": 1922,
              "y": 861206
            },
			{
              "x": 1923,
              "y": 911377
            },
			{
              "x": 1924,
              "y": 1015136
            },
			{
              "x": 1925,
              "y": 820766
            },
			{
              "x": 1926,
              "y": 711914
            },
			{
              "x": 1927,
              "y": 773716
            },
			{
              "x": 1928,
              "y": 474323
            },
			{
              "x": 1929,
              "y": 869318
            },
			{
              "x": 1930,
              "y": 649450
            },
			{
              "x": 1931,
              "y": 434056
            },
			{
              "x": 1932,
              "y": 397157
            },
			{
              "x": 1933,
              "y": 320972
            },
			{
              "x": 1934,
              "y": 919161
            },
			{
              "x": 1935,
              "y": 1034929
            },
			{
              "x": 1936,
              "y": 875948
            },
			{
              "x": 1937,
              "y": 1072276
            },
			{
              "x": 1938,
              "y": 799557
            },
			{
              "x": 1939,
              "y": 836279
            },
			{
              "x": 1940,
              "y": 1112693
            },
			{
              "x": 1941,
              "y": 684915
            },
			{
              "x": 1942,
              "y": 580087
            },
			{
              "x": 1943,
              "y": 606287
            },
			{
              "x": 1944,
              "y": 923176
            },
			{
              "x": 1945,
              "y": 1280341
            },
			{
              "x": 1946,
              "y": 1722590
            },
			{
              "x": 1947,
              "y": 1398093
            },
			{
              "x": 1948,
              "y": 1743035
            },
			{
              "x": 1949,
              "y": 1821204
            },
			{
              "x": 1950,
              "y": 1951474
            },
			{
              "x": 1951,
              "y": 1132641
            },
			{
              "x": 1952,
              "y": 1026846
            },
			{
              "x": 1953,
              "y": 884658
            },
			{
              "x": 1954,
              "y": 1079847
            },
			{
              "x": 1955,
              "y": 1181838
            },
			{
              "x": 1956,
              "y": 1051182
            },
			{
              "x": 1957,
              "y": 1272346
            },
			{
              "x": 1958,
              "y": 1098924
            },
			{
              "x": 1959,
              "y": 1221221
            },
			{
              "x": 1960,
              "y": 1167669
            },
			{
              "x": 1961,
              "y": 1600710
            },
			{
              "x": 1962,
              "y": 1207881
            },
			{
              "x": 1963,
              "y": 821952
            },
			{
              "x": 1964,
              "y": 816139
            },
			{
              "x": 1965,
              "y": 1029645
            },
			{
              "x": 1966,
              "y": 1124293
            },
			{
              "x": 1967,
              "y": 1447143
            },
			{
              "x": 1968,
              "y": 2031847
            },
			{
              "x": 1969,
              "y": 1577481
            },
			{
              "x": 1970,
              "y": 1501293
            },
			{
              "x": 1971,
              "y": 1591073
            },
			{
              "x": 1972,
              "y": 1892386
            },
			{
              "x": 1973,
              "y": 1724146
            },
			{
              "x": 1974,
              "y": 1243080
            },
			{
              "x": 1975,
              "y": 1058836
            },
			{
              "x": 1976,
              "y": 1467020
            },
			{
              "x": 1977,
              "y": 1359856
            },
			{
              "x": 1978,
              "y": 1714893
            },
			{
              "x": 1979,
              "y": 1630929
            },
			{
              "x": 1980,
              "y": 1785293
            },
			{
              "x": 1981,
              "y": 1149144
            },
			{
              "x": 1982,
              "y": 1636058
            },
			{
              "x": 1983,
              "y": 1829636
            },
			{
              "x": 1984,
              "y": 2704794
            },
			{
              "x": 1985,
              "y": 2286609
            },
			{
              "x": 1986,
              "y": 1899437
            },
			{
              "x": 1987,
              "y": 2061830
            },
			{
              "x": 1988,
              "y": 2081162
            },
			{
              "x": 1989,
              "y": 1543656
            },
			{
              "x": 1990,
              "y": 1495785
            },
			{
              "x": 1991,
              "y": 1641661
            },
			{
              "x": 1992,
              "y": 1423963
            },
			{
              "x": 1993,
              "y": 1971421
            },
			{
              "x": 1994,
              "y": 1184783
            },
			{
              "x": 1995,
              "y": 1180979
            },
			{
              "x": 1996,
              "y": 1168610
            },
			{
              "x": 1997,
              "y": 1365157
            },
			{
              "x": 1998,
              "y": 1409391
            },
			{
              "x": 1999,
              "y": 2026441
            },
			{
              "x": 2000,
              "y": 2438617
            },
			{
              "x": 2001,
              "y": 1921305
            },
			{
              "x": 2002,
              "y": 1503623
            },
			{
              "x": 2003,
              "y": 1368245
            },
			{
              "x": 2004,
              "y": 1917004
            },
			{
              "x": 2005,
              "y": 2024431
            },
			{
              "x": 2006,
              "y": 2595937
            },
			{
              "x": 2007,
              "y": 3047133
            },
			{
              "x": 2008,
              "y": 3202645
            },
			{
              "x": 2009,
              "y": 2567165
            },
			{
              "x": 2010,
              "y": 2461237
            },
			{
              "x": 2011,
              "y": 2642045
            },
			{
              "x": 2012,
              "y": 3028033
            },
          ],
        "className": ".attendance"
        },
      ],
      "xScale": "ordinal",
      "yScale": "linear",
	  "comp": [
	  	{
		  "label": "wwi",
		  "data": [
		  {
              "x": 1917,
			  "y": 3500000
            },
			{
              "x": 1918.5,
			  "y": 3500000
            },
          ],
		  "className": ".comp.wwi",
          "type": "line"
		},
		{
		  "label": "wwii",
		  "data": [
		  {
              "x": 1941.5,
			  "y": 3500000
            },
			{
              "x": 1945,
			  "y": 3500000
            },
          ],
		  "className": ".comp.wwii",
          "type": "line"
		},
		{
		  "label": "greatdepression",
		  "data": [
		  {
              "x": 1929.5,
			  "y": 3500000
            },
			{
              "x": 1941.5,
			  "y": 3500000
            },
          ],
		  "className": ".comp.greatdepression",
          "type": "line"
		},
		{
		  "label": "oilcrisis",
		  "data": [
		  {
              "x": 1973,
			  "y": 3500000
            },
			{
              "x": 1979,
			  "y": 3500000
            },
          ],
		  "className": ".comp.oilcrisis",
          "type": "line"
		},
		{
		  "label": "recession",
		  "data": [
		  {
              "x": 2008.5,
			  "y": 3500000
            },
			{
              "x": 2010,
			  "y": 3500000
            },
          ],
		  "className": ".comp.recession",
          "type": "line"
		},
	]
};
var opts = {
"mouseover": function (d, i) {
	var pos = $(this).offset();
    $(tt).text(d.x + ': ' + d.y + ' Attendees')
	.css({top: topOffset + pos.top, left: pos.left + leftOffset})
      .show();
  },
  "mouseout": function (x) {
    $(tt).hide();
  }
  };
var MyChart = new xChart('line-dotted', data, '#myChart', opts);
</script>

</body>
</html>
